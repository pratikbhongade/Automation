<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Validation Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port);

            socket.on('status_update', function(data) {
                const statusDiv = document.getElementById('status');
                statusDiv.innerHTML = `<p>Status: ${data.status}</p><p>Result: ${data.result}</p>`;
            });

            document.getElementById('start-validation').addEventListener('click', () => {
                const environment = document.querySelector('input[name="environment"]:checked').value;
                fetch('/start', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ environment })
                }).then(response => response.json()).then(data => {
                    console.log(data);
                });
            });
        });
    </script>
</head>
<body>
    <h1>Validation Dashboard</h1>
    <div>
        <label>
            <input type="radio" name="environment" value="it"> IT
        </label>
        <label>
            <input type="radio" name="environment" value="qv"> QV
        </label>
        <label>
            <input type="radio" name="environment" value="prod"> Prod
        </label>
        <button id="start-validation">Start Validation</button>
    </div>
    <div id="status">
        <p>Status: Not Started</p>
    </div>
</body>
</html>
