from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# Setup WebDriver for the first browser (Assuming Edge)
driver = webdriver.Edge()

# Step 1: Ask for the validation portal link
portal_link = input("Please enter the validation portal link: ")

# Step 2: Go to the submitted link
driver.get(portal_link)

# Step 3: Click on 'Set Testing Results' button
try:
    # Wait until the 'Set Testing Results' button is clickable
    set_results_button = WebDriverWait(driver, 10).until(
        EC.element_to_be_clickable((By.XPATH, "//button[@onclick='SetTestingResults()']"))
    )
    set_results_button.click()
except Exception as e:
    print(f"Error clicking 'Set Testing Results' button: {e}")

# Step 4: Hard-code the URL of the new browser that will be opened
new_url = "http://your-hardcoded-url.com/validation-page"

# Step 5: Start a new WebDriver session for the new browser
new_browser_driver = webdriver.Edge()

# Step 6: Navigate to the hardcoded URL
new_browser_driver.get(new_url)

# Step 7: Select the 'Success' radio button in the new browser
try:
    success_radio = WebDriverWait(new_browser_driver, 10).until(
        EC.element_to_be_clickable((By.ID, "TestingResults"))
    )
    success_radio.click()
except Exception as e:
    print(f"Error selecting 'Success' radio button: {e}")

# Step 8: Click the 'OK' button in the new browser
try:
    ok_button = WebDriverWait(new_browser_driver, 10).until(
        EC.element_to_be_clickable((By.XPATH, "//button[@onclick='OK()']"))
    )
    ok_button.click()
except Exception as e:
    print(f"Error clicking OK button: {e}")

# Step 9: Handle the confirmation dialog (JavaScript confirmation)
try:
    # Wait for the confirmation alert to appear and accept it
    confirmation = WebDriverWait(new_browser_driver, 10).until(EC.alert_is_present())
    confirmation.accept()  # Click 'OK' on the confirmation dialog
except Exception as e:
    print(f"Error handling confirmation dialog: {e}")

# Close both browsers
driver.quit()
new_browser_driver.quit()
